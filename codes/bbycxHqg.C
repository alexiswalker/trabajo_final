//#include <Timers.h>


int puls[2048] = { 526 ,525 ,525 ,525 ,525 ,525 ,525 ,525 ,524 ,525 ,525 ,525 ,525 ,526 ,526 ,526 ,526 ,527 ,527 ,528 ,528 ,528 ,528 ,528 ,528 ,529 ,529 ,529 ,530 ,530 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,532 ,531 ,531 ,531 ,531 ,532 ,532 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,530 ,531 ,530 ,530 ,530 ,530 ,530 ,530 ,529 ,529 ,529 ,529 ,529 ,528 ,528 ,529 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,527 ,527 ,528 ,528 ,528 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,528 ,527 ,527 ,527 ,527 ,528 ,527 ,528 ,527 ,528 ,528 ,528 ,528 ,527 ,528 ,528 ,528 ,528 ,527 ,528 ,528 ,528 ,528 ,527 ,528 ,528 ,528 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,528 ,528 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,526 ,526 ,527 ,526 ,526 ,526 ,527 ,527 ,527 ,526 ,526 ,526 ,526 ,526 ,526 ,527 ,527 ,526 ,526 ,526 ,526 ,527 ,527 ,526 ,526 ,526 ,526 ,527 ,527 ,526 ,526 ,526 ,527 ,527 ,526 ,526 ,527 ,527 ,527 ,527 ,526 ,526 ,527 ,527 ,526 ,527 ,526 ,527 ,526 ,526 ,526 ,527 ,527 ,527 ,526 ,526 ,527 ,527 ,527 ,527 ,527 ,527 ,528 ,528 ,528 ,528 ,528 ,528 ,529 ,529 ,529 ,530 ,530 ,530 ,531 ,530 ,531 ,532 ,532 ,532 ,532 ,533 ,533 ,533 ,533 ,533 ,533 ,533 ,533 ,533 ,533 ,534 ,534 ,533 ,533 ,533 ,533 ,533 ,533 ,532 ,533 ,532 ,532 ,532 ,532 ,532 ,532 ,531 ,531 ,531 ,531 ,531 ,531 ,530 ,530 ,530 ,530 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,527 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,529 ,528 ,528 ,528 ,528 ,529 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,527 ,528 ,527 ,528 ,527 ,528 ,527 ,527 ,527 ,527 ,527 ,527 ,528 ,528 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,526 ,526 ,526 ,527 ,527 ,527 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,527 ,527 ,526 ,526 ,526 ,527 ,526 ,526 ,526 ,526 ,527 ,527 ,526 ,526 ,526 ,526 ,527 ,526 ,526 ,526 ,527 ,527 ,526 ,526 ,527 ,527 ,527 ,528 ,528 ,528 ,528 ,529 ,529 ,529 ,529 ,530 ,530 ,530 ,530 ,531 ,531 ,532 ,532 ,531 ,532 ,532 ,533 ,533 ,533 ,533 ,533 ,534 ,533 ,533 ,533 ,533 ,533 ,533 ,532 ,533 ,533 ,533 ,532 ,532 ,532 ,532 ,532 ,531 ,531 ,531 ,531 ,531 ,530 ,530 ,530 ,530 ,529 ,529 ,529 ,528 ,529 ,528 ,528 ,528 ,528 ,528 ,528 ,527 ,527 ,527 ,527 ,527 ,526 ,526 ,526 ,526 ,526 ,527 ,527 ,526 ,527 ,527 ,526 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,528 ,528 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,528 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,526 ,526 ,526 ,526 ,526 ,527 ,526 ,526 ,527 ,527 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,525 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,525 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,525 ,525 ,525 ,525 ,526 ,525 ,525 ,525 ,526 ,526 ,526 ,525 ,525 ,526 ,526 ,525 ,525 ,525 ,525 ,526 ,526 ,525 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,527 ,527 ,527 ,527 ,527 ,527 ,528 ,528 ,528 ,528 ,528 ,529 ,529 ,530 ,529 ,530 ,530 ,531 ,531 ,531 ,531 ,532 ,531 ,531 ,531 ,531 ,532 ,532 ,531 ,531 ,531 ,532 ,531 ,531 ,531 ,531 ,531 ,531 ,530 ,530 ,530 ,529 ,530 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,528 ,529 ,528 ,528 ,528 ,528 ,528 ,527 ,527 ,527 ,528 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,526 ,527 ,527 ,527 ,527 ,527 ,526 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,526 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,526 ,526 ,527 ,527 ,527 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,526 ,527 ,527 ,526 ,526 ,526 ,526 ,527 ,526 ,526 ,527 ,527 ,527 ,527 ,527 ,528 ,528 ,528 ,528 ,529 ,529 ,529 ,529 ,529 ,529 ,530 ,530 ,530 ,531 ,530 ,531 ,530 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,532 ,531 ,531 ,531 ,531 ,530 ,530 ,530 ,530 ,530 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,527 ,528 ,527 ,527 ,528 ,528 ,528 ,527 ,527 ,528 ,527 ,527 ,527 ,528 ,528 ,528 ,527 ,527 ,527 ,528 ,528 ,528 ,527 ,527 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,527 ,527 ,527 ,528 ,527 ,527 ,528 ,527 ,527 ,527 ,527 ,527 ,528 ,528 ,528 ,527 ,527 ,527 ,528 ,527 ,527 ,527 ,528 ,528 ,528 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,526 ,527 ,527 ,527 ,526 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,526 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,526 ,527 ,527 ,527 ,526 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,528 ,528 ,528 ,527 ,528 ,528 ,529 ,529 ,529 ,529 ,529 ,530 ,530 ,530 ,530 ,530 ,531 ,531 ,531 ,531 ,531 ,532 ,531 ,531 ,532 ,532 ,532 ,532 ,532 ,532 ,532 ,532 ,532 ,532 ,531 ,532 ,532 ,532 ,531 ,531 ,531 ,532 ,531 ,531 ,530 ,531 ,531 ,531 ,530 ,529 ,530 ,530 ,530 ,529 ,530 ,529 ,529 ,529 ,528 ,528 ,529 ,528 ,528 ,528 ,528 ,529 ,528 ,528 ,528 ,528 ,528 ,527 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,529 ,528 ,528 ,528 ,528 ,529 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,527 ,528 ,527 ,528 ,527 ,528 ,527 ,527 ,527 ,527 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,527 ,527 ,527 ,528 ,528 ,527 ,528 ,527 ,528 ,527 ,527 ,527 ,527 ,528 ,528 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,527 ,528 ,527 ,527 ,527 ,527 ,528 ,528 ,527 ,527 ,528 ,527 ,527 ,527 ,527 ,528 ,528 ,527 ,527 ,528 ,528 ,528 ,528 ,527 ,527 ,528 ,528 ,527 ,528 ,527 ,527 ,528 ,528 ,528 ,528 ,527 ,528 ,528 ,528 ,528 ,528 ,529 ,529 ,529 ,529 ,529 ,531 ,530 ,529 ,530 ,530 ,531 ,531 ,531 ,531 ,531 ,532 ,532 ,532 ,532 ,533 ,533 ,533 ,533 ,533 ,533 ,534 ,533 ,533 ,534 ,534 ,534 ,533 ,533 ,533 ,533 ,533 ,533 ,533 ,532 ,532 ,532 ,532 ,532 ,531 ,531 ,532 ,531 ,531 ,531 ,531 ,531 ,531 ,530 ,529 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,529 ,530 ,529 ,530 ,529 ,529 ,529 ,529 ,530 ,530 ,529 ,529 ,530 ,530 ,530 ,529 ,529 ,529 ,530 ,529 ,529 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,529 ,529 ,530 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,528 ,528 ,528 ,528 ,529 ,528 ,528 ,528 ,529 ,528 ,528 ,528 ,528 ,528 ,528 ,527 ,528 ,528 ,528 ,528 ,528 ,527 ,528 ,528 ,528 ,527 ,527 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,529 ,528 ,529 ,529 ,529 ,529 ,529 ,529 ,530 ,530 ,530 ,530 ,531 ,531 ,532 ,532 ,532 ,532 ,532 ,533 ,532 ,533 ,533 ,533 ,533 ,533 ,533 ,534 ,534 ,534 ,534 ,534 ,533 ,534 ,534 ,534 ,533 ,533 ,533 ,533 ,533 ,533 ,533 ,532 ,532 ,532 ,532 ,532 ,531 ,532 ,532 ,531 ,531 ,531 ,531 ,531 ,531 ,530 ,530 ,530 ,530 ,530 ,530 ,529 ,530 ,529 ,529 ,529 ,529 ,529 ,529 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,528 ,529 ,528 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,530 ,530 ,529 ,529 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,528 ,528 ,529 ,529 ,528 ,529 ,529 ,529 ,529 ,529 ,528 ,529 ,528 ,528 ,528 ,528 ,528 ,529 ,529 ,528 ,528 ,528 ,529 ,529 ,528 ,528 ,529 ,529 ,529 ,528 ,528 ,529 ,529 ,529 ,528 ,528 ,528 ,528 ,529 ,528 ,528 ,529 ,528 ,528 ,528 ,528 ,529 ,529 ,529 ,528 ,529 ,529 ,529 ,529 ,530 ,530 ,530 ,530 ,531 ,531 ,531 ,532 ,532 ,532 ,532 ,533 ,533 ,534 ,533 ,534 ,534 ,534 ,534 ,535 ,535 ,534 ,535 ,535 ,535 ,535 ,535 ,535 ,535 ,535 ,534 ,534 ,534 ,534 ,534 ,534 ,534 ,534 ,533 ,533 ,533 ,533 ,533 ,533 ,532 ,531 ,532 ,532 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,530 ,530 ,530 ,530 ,530 ,530 ,529 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,529 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,531 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,531 ,530 ,530 ,530 ,530 ,530 ,529 ,530 ,530 ,530 ,530 ,529 ,529 ,529 ,529 ,530 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,528 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,528 ,529 ,529 ,529 ,529 ,528 ,529 ,529 ,529 ,529 ,528 ,529 ,529 ,529 ,529 ,528 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,529 ,530 ,529 ,529 ,529 ,529 ,530 ,530 ,530 ,530 ,530 ,530 ,531 ,531 ,531 ,531 ,532 ,532 ,532 ,533 ,533 ,533 ,534 ,534 ,534 ,534 ,535 ,534 ,535 ,535 ,535 ,535 ,535 ,535 ,535 ,535 ,535 ,536 ,535 ,535 ,535 ,535 ,535 ,534 ,535 ,534 ,535 ,535 ,534 ,534 ,534 ,534 ,533 ,533 ,533 ,532 ,533 ,533 ,532 ,532 ,532 ,532 ,532 ,532 ,532 ,531 ,532 ,531 ,531 ,531 ,531 ,532 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,530 ,531 ,530 ,531 ,531 ,530 ,530 ,531 ,531 ,531 ,530 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,530 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,530 ,531 ,531 ,531 ,531 ,531 ,530 ,531 ,530 ,530 ,530 ,530 ,530 ,531 ,531 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,529 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,529 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,531 ,530 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,532 ,532 ,532 ,533 ,533 ,534 ,534 ,534 ,534 ,535 ,535 ,536 ,535 ,536 ,536 ,536 ,536 ,537 ,536 ,537 ,537 ,537 ,537 ,537 ,537 ,537 ,536 ,536 ,536 ,536 ,537 ,536 ,536 ,536 ,536 ,535 ,535 ,535 ,535 ,535 ,535 ,534 ,534 ,534 ,533 ,533 ,533 ,533 ,533 ,532 ,533 ,533 ,532 ,532 ,531 ,532 ,532 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,530 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,531 ,532 ,532 ,531 ,532 ,532 ,532 ,532 ,531 ,532 ,532 ,532 ,531 ,531 ,532 ,532 ,531 ,531 ,532 ,531 ,532 ,532 ,531 ,531 ,531 ,531 ,531 ,531 ,530 ,531 ,531 ,531 ,531 ,530 ,531 ,531 ,531 ,530 ,530 ,530 ,530 ,531 ,531 ,530 ,531 ,531 ,531 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,531 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530 ,530};    //tablica z probkami sygnalu
int wartMax=0; //do badania lokalnych wart. max 

  
//Timer pomiarPulsu;

void setup() {
Serial.begin(9600);
//delay(5000);  //na ustabilizowanie czujnika przed pomiarem

//pomiarPulsu.begin(6);  //timer na 6 ms
}


void loop() {
/*//pobranie wyników
  for(int i=0; i<2048; i++)
  {
    if(pomiarPulsu.available());
    {
         puls[i]=analogRead(0);
         pomiarPulsu.restart();
    }
  }

*/
  //wydruk wyników
for(int i=0; i<20; i++)
    {
        Serial.println(puls[i]);
    }


//tutaj filtracja ktorej nie mam


//szukanie lokalnych wart. max

for(int i=0; i<2048; i++)
{
  int a=puls[i];
  int b=puls[i+1];
  wartMax=max(puls[i],puls[i+1]);

  if(wartMax<puls[i+1])
  {
    Serial.println(wartMax);
    wartMax=0;
  }
  
}

}